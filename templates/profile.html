{% block title %}
    <title>Profile</title>
{% endblock %}

{% extends 'index.html' %}

{% block content %}
    <div class="ui inverted center aligned container segment">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="ui message">
                    <i class="close icon"></i>
                    {% for message in messages %}
                        <p class="flash-message">{{ message }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <h1 class="ui header">Profile</h1>

        <img src="{{ url_for('static', filename='profile_pics/' + current_user.profile_image) }}"
             class="ui avatar small circular image" alt="Profile Picture">

        <div class="ui segments">
            <div class="ui segment"><p><strong>Username:</strong> {{ current_user.username }}</p></div>
            <div class="ui segment"><p><strong>First Name:</strong> {{ current_user.first_name }}</p></div>
            <div class="ui segment"><p><strong>Last Name:</strong> {{ current_user.last_name }}</p></div>
            <div class="ui segment"><p><strong>Email:</strong> {{ current_user.email }}</p></div>


        </div>
    </div>
    <hr>
    <div class="ui inverted container segment">
        <h2 class="ui header center aligned">Edit Profile</h2>
        <form method="POST" action="{{ url_for('profile') }}" enctype="multipart/form-data" class="ui form">
            {{ form.hidden_tag() }}

            <div class="ui segments>">
                <div class="ui segment">
                    <div class="ui file action input">
                        <input id="profile_image" name="profile_image" type="file">
                        <label for="profile_image" class="ui blue button">
                            <i class="wizard icon"></i>
                            Choose photo
                        </label>
                    </div>
                </div>
                <div class="ui segment">
                    <div class="two fields">
                        <div class="field">
                            <label for="first_name" class="form-control-label">First Name</label>
                            {{ form.first_name(class="form-control") }}
                        </div>

                        <div class="field">
                            <label for="last_name" class="form-control-label">Last Name</label>
                            {{ form.last_name(class="form-control") }}
                        </div>
                    </div>
                </div>
                <div class="ui segment">
                    <div class="field">
                        <label for="email" class="form-control-label">Email</label>
                        {{ form.email(class="form-control") }}
                    </div>
                </div>
                <div class="ui segment">
                    <div class="two fields">
                        <div class="field">
                            <label for="password" class="form-control-label">Password</label>
                            {{ form.password(class="form-control") }}
                        </div>

                        <div class="field">
                            <label for="confirm_password" class="form-control-label">Confirm Password</label>
                            {{ form.confirm_password(class="form-control") }}
                        </div>
                    </div>
                </div>
                <div class="ui segment center aligned">
                    {{ form.submit(class="ui submit button teal") }}
                </div>
                <div class="ui segment center aligned">
                    <a href="{{ url_for('logout') }}" class="ui red button">Logout</a>
                </div>
            </div>

        </form>

    </div>
{% endblock %}
